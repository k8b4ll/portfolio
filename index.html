<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfolio Landing</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="page">
      <header>
        <div class="header-left">
          <div>Katelyn Moro</div>
          <div>Graphic &amp; Digital Design</div>
        </div>
       <!-- <div class="header-center">
          <div>insert email here</div>
        </div> --> <!-- place holder -->
        <div class="header-right">
          <div>About</div>
        </div>
      </header>
      <main>
  <!-- Optional: keep your “Selected Projects” anchor at the top -->
  <div
    class="selected selected-anchor"
    data-line1="Selected Projects"
    data-line2="2020 — 2025"
    aria-label="Selected Projects 2020 — 2025"
  ></div>

        <div class="projects-rail">
  <!-- PROJECT 1 -->
  <section class="project" id="p1">
    <div class="project-meta">
      <div class="meta-left">
        <div>1/7</div>
        <div>
          Project Name 01<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">branding, web, social, e-commerce</div>
      </div>
    </div>

    <div class="project-gallery">
      <img src="images/p1-01.jpg" alt="Project 1 image 1" />
      <img src="images/p1-02.jpg" alt="Project 1 image 2" />
      <img src="images/p1-03.jpg" alt="Project 1 image 3" />
    </div>
  </section>

  <!-- PROJECT 2 -->
  <section class="project" id="p2">
    <div class="project-meta">
      <div class="meta-left">
        <div>2/7</div>
        <div>
          Project Name 02<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">campaign, paid ads, motion, social</div>
      </div>
    </div>

    <div class="project-gallery">
      <img src="images/p2-01.jpg" alt="Project 2 image 1" />
      <img src="images/p2-02.jpg" alt="Project 2 image 2" />
      <img src="images/p2-03.jpg" alt="Project 2 image 3" />
    </div>
  </section>

  <!-- PROJECT 3 -->
  <section class="project" id="p3">
    <div class="project-meta">
      <div class="meta-left">
        <div>3/7</div>
        <div>
          Project Name 03<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">product pages, photography, retouching</div>
      </div>
    </div>

    <div class="project-gallery">
      <img src="images/p3-01.jpg" alt="Project 3 image 1" />
      <img src="images/p3-02.jpg" alt="Project 3 image 2" />
      <img src="images/p3-03.jpg" alt="Project 3 image 3" />
    </div>
  </section>

  <!-- PROJECT 4 -->
  <section class="project" id="p4">
    <div class="project-meta">
      <div class="meta-left">
        <div>4/7</div>
        <div>
          Project Name 04<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">Amazon A+, infographics, layout</div>
      </div>
    </div>

    <div class="project-gallery">
      <img src="images/p4-01.jpg" alt="Project 4 image 1" />
      <img src="images/p4-02.jpg" alt="Project 4 image 2" />
      <img src="images/p4-03.jpg" alt="Project 4 image 3" />
    </div>
  </section>

  <!-- PROJECT 5 -->
  <section class="project" id="p5">
    <div class="project-meta">
      <div class="meta-left">
        <div>5/7</div>
        <div>
          Project Name 05<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">brand system, typography, guidelines</div>
      </div>
    </div>

    <div class="project-gallery">
      <img src="images/p5-01.jpg" alt="Project 5 image 1" />
      <img src="images/p5-02.jpg" alt="Project 5 image 2" />
      <img src="images/p5-03.jpg" alt="Project 5 image 3" />
    </div>
  </section>

  <!-- PROJECT 6 -->
  <section class="project" id="p6">
    <div class="project-meta">
      <div class="meta-left">
        <div>6/7</div>
        <div>
          Project Name 06<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">storyboards, art direction, video assets</div>
      </div>
    </div>

    <div class="project-gallery">
      <img src="images/p6-01.jpg" alt="Project 6 image 1" />
      <img src="images/p6-02.jpg" alt="Project 6 image 2" />
      <img src="images/p6-03.jpg" alt="Project 6 image 3" />
    </div>
  </section>

  <!-- PROJECT 7 -->
  <section class="project" id="p7">
    <div class="project-meta">
      <div class="meta-left">
        <div>7/7</div>
        <div>
          Project Name 07<br />
          Category / Type
        </div>
      </div>
      <div class="meta-center">Project info</div>
      <div class="meta-right">
        Scope
        <div class="scope">web design, UI, interaction, prototyping</div>
      </div>
    </div>
        </div> 

    <div class="project-gallery">
      <img src="images/p7-01.jpg" alt="Project 7 image 1" />
      <img src="images/p7-02.jpg" alt="Project 7 image 2" />
      <img src="images/p7-03.jpg" alt="Project 7 image 3" />
    </div>
  </section>
</main>

      <footer>
        <div class="footer-left">
          <div>1/7</div>
          <div>
            Rokinon<br />
            Brand Identity
          </div>
        </div>
        <div class="footer-center">Project info</div>
        <div class="footer-right">
          Scope
          <div class="scope">
            brand visuals, web / product pages, art direction, print, digital, motion,
            campaign, social + e-commerce assets
          </div>
        </div>
      </footer> 
    </div>
    <!-- end .page -->
  <canvas id="inkCanvas"></canvas>
   <script>
(() => {
  const canvas = document.getElementById("inkCanvas");
  const ctx = canvas.getContext("2d");

  console.log("✅ particle script running");
ctx.fillStyle = "#000";
ctx.fillRect(30, 30, 12, 12); // TEMP test square

  
  const anchor = document.querySelector(".selected-anchor");
  const footer = document.querySelector("footer");

  const settings = {
    count: 2200,      // more dots = clearer type
    r: 1,           // TINY particles
    floatSpeed: 0.55,
    wander: 0.10,
    pull: 0.09,
    damp: 0.86,
    rehideMs: 5000
  };
 
  //cursor repulsion settings
    repelRadius: 140,     // how close cursor must be to push particles
    repelStrength: 0.9,   // push force
    repelMax: 1.8         // safety cap
  };

  let particles = [];
  let formed = false;
  let revertTimer = null;

  //track pointer position for repulsion
  let pointer = {
    x: 0,
    y: 0,
    active: false
  };

  function getOverlayHeight() {
    if (!footer) return window.innerHeight;
    const top = footer.getBoundingClientRect().top;
    // canvas should stop at the black divider line (footer top border)
    return Math.max(200, Math.floor(top));
  }

  function resizeCanvas() {
    const dpr = Math.max(1, window.devicePixelRatio || 1);
    const h = Math.max(200, getOverlayHeight());

    canvas.style.width = window.innerWidth + "px";
  canvas.style.height = h + "px";
    
    canvas.width = Math.floor(window.innerWidth * dpr);
    canvas.height = Math.floor(h * dpr);
    
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  function buildParticles() {
    const w = window.innerWidth;
    const h = getOverlayHeight();
    particles = Array.from({ length: settings.count }, () => ({
      x: Math.random() * w,
      y: Math.random() * h,
      vx: (Math.random() - 0.5) * 0.7,
      vy: (Math.random() - 0.5) * 0.7,
      tx: null,
      ty: null
    }));
  }

  // Build targets ONLY inside the anchor box, but translate them into page coords
  function computeTargets() {
    if (!anchor) return [];
    const ar = anchor.getBoundingClientRect();

    // Offscreen canvas sized to anchor box
    const off = document.createElement("canvas");
    off.width = Math.max(1, Math.floor(ar.width));
    off.height = Math.max(1, Math.floor(ar.height));
    const o = off.getContext("2d");

    const line1 = anchor.dataset.line1 || "";
    const line2 = anchor.dataset.line2 || "";

    // Helvetica on reveal (this affects the particle-formed text)
    const fs = Math.max(14, Math.min(22, ar.width * 0.05));
    o.clearRect(0, 0, off.width, off.height);
    o.fillStyle = "#000";
    o.textBaseline = "top";
    o.textAlign = "left";
    o.font = `600 ${fs}px Helvetica`;
    o.fillText(line1, 0, 18);
    o.fillText(line2, 0, 18 + fs + 10);

    const img = o.getImageData(0, 0, off.width, off.height).data;

    const step = Math.max(2, Math.floor(Math.min(ar.width, ar.height) / 60)); // denser sampling
    const pts = [];

    for (let y = 0; y < off.height; y += step) {
      for (let x = 0; x < off.width; x += step) {
        const i = (y * off.width + x) * 4;
        if (img[i + 3] > 20) {
          // translate into global page coords
          pts.push({ x: ar.left + x, y: ar.top + y });
        }
      }
    }

    if (!pts.length) return [];
    const out = [];
    for (let i = 0; i < settings.count; i++) {
      out.push(pts[(Math.random() * pts.length) | 0]);
    }
    return out;
  }

  function reveal() {
    formed = true;
    const targets = computeTargets();
    for (let i = 0; i < particles.length; i++) {
      const t = targets[i];
      particles[i].tx = t ? t.x : particles[i].x;
      particles[i].ty = t ? t.y : particles[i].y;
    }
    clearTimeout(revertTimer);
    revertTimer = setTimeout(hide, settings.rehideMs);
  }

  function hide() {
    formed = false;
    for (const p of particles) {
      p.tx = null;
      p.ty = null;
    }
    clearTimeout(revertTimer);
    revertTimer = null;
  }

  function tick() {
    ctx.fillRect(20, 20, 6, 6); // TEMP TEST
    
    const w = window.innerWidth;
    const h = getOverlayHeight();

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#000";

    for (const p of particles) {
      if (formed && p.tx != null) {
        const dx = p.tx - p.x;
        const dy = p.ty - p.y;
        p.vx = p.vx * settings.damp + dx * settings.pull;
        p.vy = p.vy * settings.damp + dy * settings.pull;
        p.x += p.vx;
        p.y += p.vy;
      } else {
        //roaming motion
        p.vx += (Math.random() - 0.5) * settings.wander;
        p.vy += (Math.random() - 0.5) * settings.wander;

        //repel away from cursor
        if (pointer.active) {
          const dx = p.x - pointer.x;
          const dy = p.y - pointer.y;
          const dist = Math.hypot(dx, dy);

          if (dist > 0 && dist < settings.repelRadius) {
            const t = 1 - dist / settings.repelRadius; // 0..1
            const nx = dx / dist;
            const ny = dy / dist;

            const force = Math.min(
              settings.repelMax,
              t * t * settings.repelStrength
            );

            p.vx += nx * force;
            p.vy += ny * force;
          }
        }

        //clamp drift speed
        const m = settings.floatSpeed;
        p.vx = Math.max(-m, Math.min(m, p.vx));
        p.vy = Math.max(-m, Math.min(m, p.vy));

        p.x += p.vx;
        p.y += p.vy;

        //bounce edges (locked behavior)
        if (p.x < 0 || p.x > w) p.vx *= -1;
        if (p.y < 0 || p.y > h) p.vy *= -1;

        p.x = Math.min(Math.max(p.x, 0), w);
        p.y = Math.min(Math.max(p.y, 0), h);
      }

      ctx.beginPath();
      ctx.arc(p.x, p.y, settings.r, 0, Math.PI * 2);
      ctx.fill();
    }

    requestAnimationFrame(tick);
  }

  // Reveal only when mouse crosses center X axis
  function handlePointerMove(e) {
    const cx = window.innerWidth / 2;
    if (e.clientX >= cx) {
      // If already formed, let it stay until timer hides it
      if (!formed) reveal();
    } else {
      // If they move back left, we can hide immediately (optional)
      // hide();
    }
  }

  window.addEventListener("pointermove", handlePointerMove, { passive: true });
  window.addEventListener("pointerdown", handlePointerMove, { passive: true });

 //update pointer position for repulsion
  window.addEventListener("pointermove", (e) => {
    pointer.x = e.clientX;
    pointer.y = e.clientY;
    pointer.active = true;
  }, { passive: true });

  window.addEventListener("pointerleave", () => {
    pointer.active = false;
  });

  window.addEventListener("resize", () => {
    resizeCanvas();
    buildParticles();
    if (formed) reveal();
  });

  // Init (wait until layout is finalized)
window.addEventListener("load", () => {
  resizeCanvas();
  buildParticles();
  tick();
});

</script>

  </body>
</html>
